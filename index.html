<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Dubstep Hacking Lyrics</title>
<style>
  body {
    margin:0; padding:0; overflow:hidden;
    background:#000; color:#0f0;
    font-family: "Courier New", monospace;
  }

  /* Hitbox plein écran invisible pour cliquer */
  #overlay {
    position:fixed; inset:0;
    background:#000;
    display:flex; justify-content:center; align-items:center;
    cursor:pointer; z-index:9999;
    transition: background 0.8s ease;
  }

  /* Texte de la phrase */
  #lyrics {
    position:absolute; top:50%; left:50%;
    transform:translate(-50%,-50%);
    font-size:2rem; line-height:1.5; white-space:pre-wrap;
    letter-spacing:2px;
  }
</style>
</head>
<body>

<div id="overlay">
  <div style="text-align:center;">
    <div style="color:#0f0; font-size:1.2rem;">Cliquez pour activer la musique</div>
  </div>
</div>

<div id="lyrics"></div>

<audio id="song" preload="auto">
  <source src="musique.mp3" type="audio/mpeg">
</audio>

<script>
const overlay = document.getElementById('overlay');
const audio = document.getElementById('song');
const lyricsDiv = document.getElementById('lyrics');

const text = "Are you trying to tell me you are not completely blown away by my magnificent entrance just now?".split(" ");

const musicStart = 75; // 1:15
const lyricStart = 82.5; // 1:22.5
const lyricEnd = 87;     // 1:27
const lyricDuration = lyricEnd - lyricStart;

overlay.addEventListener('click', async () => {
  // Effet TV éteinte : transition écran noir
  overlay.style.background = "#000";
  overlay.innerHTML = ""; // retire le texte
  // Lecture audio
  audio.currentTime = musicStart;
  audio.muted = false;
  await audio.play();
  overlay.remove(); // supprime l'overlay

  // Boucle pour les lyrics
  audio.addEventListener("timeupdate", () => {
    const t = audio.currentTime;
    if (t >= lyricStart && t <= lyricEnd) {
      const elapsed = t - lyricStart;
      const wordIndex = Math.floor((elapsed / lyricDuration) * text.length);
      lyricsDiv.innerHTML = text.slice(0, wordIndex+1).join(" ");
    } else if (t < lyricStart) {
      lyricsDiv.innerHTML = "";
    } else if (t > lyricEnd) {
      lyricsDiv.innerHTML = text.join(" ");
    }
  });
});
</script>

</body>
</html>
